catholic_authority_rome = {
	value = 0
	#check for 'rightful control of vatican'
	if = {
		limit = {
			has_papal_rule = no
		}
		add = -20
	}
	else_if = {
		limit = {
			has_global_variable = mdd_roman_question_answered
		}
		add = 10
	}
	else ={
		add = 30
	}
	if = {
		limit = {
			NOT = {
				this.religion = rel:catholic
			}
		}
		add = -40
	}
	else = {
		#these criteria only apply correctly for a catholic rom
		# 'correct' church and state law
		if = {
			limit = {
				has_law = law_type:law_state_religion
			}
			add = 10
		}
		else = {
			add = -10
		}
		# 'correct' type of eduction
		if = {
			limit = {
				has_law = law_type:law_religious_schools
			}
			add = 10
		}
		# 'correct' groups in power
		if = {
			limit = {
				ig:ig_devout = {
					is_in_government = yes
				}
			}
			add = 15
			if = {
				limit = {
					ig:ig_devout ={
						is_strongest_ig_in_government = yes
					}
				}
				add = 5
			}
		}
		else = {
			add = -10
			if = {
				limit = {
					ig:ig_devout = {
						is_powerful = yes
					}
				}
				add = 5
			}
		}
	}
	#influence from catholic pops. 80% is 'break even' on points
	if = {
		limit = {
			religion_percent_country = {
				target = rel:catholic
				value < 0.95
			}
		}
		add = -10
	}
	else = {
		add = 5
	}
	if = {
		limit = {
			religion_percent_country = {
				target = rel:catholic
				value < 0.80
			}
		}
		add = -10
	}
	else = {
		add = 5
	}

	#strength of opposition groups
	every_interest_group = {
		limit = {
			NOT = { is_interest_group_type = ig_devout }
			is_marginal = no
			any_preferred_law = {
				this.type = law_type:law_freedom_of_conscience
				this.type = law_type:law_religious_tolerance
				this.type = law_type:law_total_separation
				this.type = law_type:law_state_atheism
				this.type = law_type:law_presidential_republic
				this.type = law_type:law_parliamentary_republic
				this.type = law_type:law_council_republic
				this.type = law_type:law_public_schools
				this.type = law_type:law_elected_bureaucrats
				this.type = law_type:law_protected_speech
			}
		}
		if = {
			limit = {
				is_powerful = yes
			}
			add = -10
		}
		else = {
			add = -5
		}
	}

	#strength of opposition leaders
	set_local_variable = { name = opposition_leader_val value = 0 }
	every_scope_character = {
		limit = {
			NOT = { is_interest_group_type = ig_devout }
			OR = {
				law_stance  = {
					law = law_type:law_state_religion
					value < neutral
				}
				law_stance  = {
					law = law_type:law_presidential_republic
					value > neutral
				}
				law_stance  = {
					law = law_type:law_parliamentary_republic
					value > neutral
				}
				law_stance  = {
					law = law_type:law_council_republic
					value > neutral
				}
				law_stance  = {
					law = law_type:law_public_schools
					value > neutral
				}
				law_stance  = {
					law = law_type:law_elected_bureaucrats
					value > neutral
				}
				law_stance  = {
					law = law_type:law_protected_speech
					value > neutral
				}
			}	
		}
		change_local_variable = {
			name = opposition_leader_val
			add = this.popularity
		}
	}
	change_variable = { #popularity is -100/100. plus popular opponents should be a negative 
		name = opposition_leader_val
		multiply = -0.01
	}
	add = var:opposition_leader_val

	multiply = authority_by_rank_multiplier
}

catholic_authority = {
	value = 5
	if = {
		limit = {
			any_country = {
				limit = {
					is_papal_states = yes
				}
			}
		}
		#bonus for relationships with papal states
		#has_diplomatic_pact trigger
	}
	# 'correct' church and state law
	if = {
		limit = {
			has_law = law_type:law_state_religion
		}
		add = 10
	}
	# 'correct' type of eduction
	if = {
		limit = {
			has_law = law_type:law_religious_schools
		}
		add = 10
	}
	# 'correct' groups in power
	if = {
		limit = {
			ig:ig_devout = {
				is_in_government = yes
			}
		}
		add = 5
		if = {
			limit = {
				ig:ig_devout ={
					is_strongest_ig_in_government = yes
				}
			}
			add = 5
		}
	}
	else = {
		if = {
			limit = {
				ig:ig_devout = {
					is_powerful = yes
				}
			}
			add = 5
		}
	}

	#influence from catholic pops. min -5 max 5
	if = {
		limit = {
			religion_percent_country = {
				target = rel:catholic
				value > 0.90
			}
		}
		add = 5
	}
	if = {
		limit = {
			religion_percent_country = {
				target = rel:catholic
				value < 0.75
			}
		}
		add = -5
	}
	else = {
		add = 5
	}

	multiply = authority_by_rank_multiplier
}

catholic_authority_minority = {
	value = -5
	# check supression/acceptance of catholic minority
	if = {
		limit = {
			any_scope_pop = {
				religion = rel:catholic
				religion_accepted = yes
			}
		}
		add = 5
	}
	else = {
		add = -10
	}
	if = {
		limit = {
			OR = {
				has_law = law_type:law_religious_schools
				has_law = law_type:law_public_schools
			}
			
		}
		add = -5
	}

	# does the catholic minority have political power? if so, min of -5 if supporessed and marginal, max 15 if powerful
	if = {
		limit = {
			var:minority_faith ?= rel:catholic
			exists = ig:ig_minority_faiths
		}
		add = 10
		if = {
			limit = {
				ig:ig_minority_faiths = {
					is_powerful = yes
				}
			}
			add = 5
		}
		if = {
			limit = {
				ig:ig_minority_faiths = {
					is_being_suppressed = yes
				}
			}
			add = -10
		}
		else_if = {
			limit = {
				ig:ig_minority_faiths = {
					is_marginal = yes
				}
			}
			add = -5
		}
	}

	#influence from catholic pops
	if = {
		limit = {
			religion_percent_country = {
				target = rel:catholic
				value > 0.15
			}
		}
		add = 5
	}
	if = {
		limit = {
			religion_percent_country = {
				target = rel:catholic
				value > 0.30
			}
		}
		add = 10
	}

	multiply = authority_by_rank_multiplier
}

authority_by_rank_multiplier = {
	if = {
		limit = {
			this.country_rank = 7 #great power
		}
		value = 3
	}
	else_if = {
		limit = {
			this.country_rank = 6 #major power
		}
		value = 2
	}
	else_if = {
		limit = {
			this.country_rank < 2 #insignificant/unrecognized/decentralized
		}
		value = 0.5
	}
	else = {
		value = 1
	}
}