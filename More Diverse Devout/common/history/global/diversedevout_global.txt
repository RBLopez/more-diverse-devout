# This is executed last among all history
GLOBAL = {


	# set_global_variable = global_protestant_liberal

	every_country = {
		limit = {
			this = c:USA
		}
		set_variable = protestant_liberal
	}

	#special setup for China/Qing (& Korea?), Japan, Russia (for serfdom)
	#landowners get scholar-gentlemen trait (& name?) devout is scholar officials with better localization
	#also setup literati (intelligencia) to be a bit more generic, but still remove anti-clerical (and different liberal trait?)
	
	every_country = {
		limit = { this.religion = rel:protestant }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_protestant = yes
		}
		
	}

	every_country = {
		limit = { this.religion = rel:catholic }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_catholic = yes
		}
	}

	every_country = {
		limit = { this.religion = rel:anglican }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_anglican = yes
		}
	}

	every_country = {
		limit = { this.religion = rel:orthodox }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_orthodox = yes
		}
	}

	every_country = {
		limit = { this.religion = rel:oriental_orthodox }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_oriental_orthodox =  = yes
		}
	}

	every_country = {
		limit = { this.religion = rel:shiite }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_shia = yes
		}
		if = {
			limit = {
				this.has_law = law_type:law_local_police
			}
			activate_law = law_type:law_religious_jurisprudence
		}
		if = {
			limit = {
				this.has_law = law_type:law_hereditary_bureaucrats
			}
			activate_law = law_type:law_religious_administration
		}
	}

	every_country = {
		limit = { this.religion = rel:sunni }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_sunni = yes
		}
		if = {
			limit = {
				this.has_law = law_type:law_local_police
			}
			activate_law = law_type:law_religious_jurisprudence
		}
		if = {
			limit = {
				this.has_law = law_type:law_hereditary_bureaucrats
			}
			activate_law = law_type:law_religious_administration
		}
	}

	every_country = {
		limit = { this.religion = rel:sikh }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_sikh = yes
		}
	}

	every_country = {
		limit = { this.religion = rel:hindu }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_hindu = yes
		}
		if = {
			limit = {
				this.has_law = law_type:law_state_religion
			}
			activate_law = law_type:law_freedom_of_conscience
		}
	}

	every_country = {
		limit = { this.religion = rel:theravada }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_theravada = yes
		}
		if = {
			limit = {
				this.has_law = law_type:law_state_religion
			}
			activate_law = law_type:law_freedom_of_conscience
		}
	}

	every_country = {
		limit = { this.religion = rel:mahayana }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_mahayana = yes
		}
		if = {
			limit = {
				this.has_law = law_type:law_state_religion
			}
			activate_law = law_type:law_freedom_of_conscience
		}
	}

	every_country = {
		limit = { this.religion = rel:gelugpa }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_gelugpa = yes
		}
	}

	every_country = {
		limit = { this.religion = rel:confucianism }
		ig:ig_devout = {
			effect_remove_religious_ideologies_all = yes
			effect_set_religious_ideology_confusionism = yes
		}
		if = {
			limit = {
				this.has_law = law_type:law_state_religion
			}
			activate_law = law_type:law_freedom_of_conscience
		}
	}

	every_country = {
		limit = {
			this = c:JAP
		}
		ig:ig_devout = {
			add_ideology = ideology_terauke
		}
		activate_law = law_type:law_religious_administration
	}

	every_country = {
		limit ={
			this = c:RUS
		}
		ig:ig_devout = {
			remove_ideology = ideology_church_lands
			add_ideology = ideology_church_lands_russia
		}
	}

}